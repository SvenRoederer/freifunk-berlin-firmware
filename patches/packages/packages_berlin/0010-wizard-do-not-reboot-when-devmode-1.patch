From: Sven Roederer <SvenRoederer@users.noreply.github.com>
Date: Tue, 9 Oct 2018 00:26:37 +0200
Subject: wizard: do not reboot when devmode=1

diff --git a/utils/luci-app-ffwizard-berlin/luasrc/view/freifunk/assistent/reboot.htm b/utils/luci-app-ffwizard-berlin/luasrc/view/freifunk/assistent/reboot.htm
index 6b3f6d303fdfd51148a22584eea6fa6410196458..69e241bfd89d8f3221199877cc44e8662d238dd6 100644
--- a/utils/luci-app-ffwizard-berlin/luasrc/view/freifunk/assistent/reboot.htm
+++ b/utils/luci-app-ffwizard-berlin/luasrc/view/freifunk/assistent/reboot.htm
@@ -2,11 +2,6 @@
   -- remove landingpage redirection of luci-mod-freifunk before final reboot
   local uci = require "luci.model.uci".cursor()
   uci:set('freifunk', 'luci', 'redirect_landingurl', '')
-
-  if uci:get("system", "ffberlin", "devmode") == "0" then
-    uci:commit('freifunk', 'luci')
-    luci.sys.reboot()
-  end
 %>
 
 <%+header%>
@@ -32,16 +27,13 @@
     </p>
   </div>
 <%
-  local uci = require "luci.model.uci".cursor()
   if uci:get("system", "ffberlin", "devmode") == "1" then
-%>
-    <p>
-      Das System ist im Entwickler-Modus und der automatische Neustart wird nicht ausgeführt.
-    </p>  
-<%
+    print("<p>Das System ist im Entwickler-Modus und der automatische Neustart wird nicht ausgeführt.</p>")
+  else
+    uci:commit('freifunk', 'luci')
+    luci.sys.reboot()
   end
 %>
 </div>
 
 <%+footer%>
-
