From: Sven Roederer <SvenRoederer@users.noreply.github.com>
Date: Fri, 12 Oct 2018 16:54:28 +0200
Subject: wizard: do not commit setting when devmode=1

This helps to debug the wizard, by having the changes for review in
the buffer.

diff --git a/utils/luci-app-ffwizard-berlin/luasrc/controller/assistent/assistent.lua b/utils/luci-app-ffwizard-berlin/luasrc/controller/assistent/assistent.lua
index da92f4b140b9dfba12723f0a8e4977ca1dda0c44..36166e99c8ab0ad693625a8204da4748689c3e5e 100644
--- a/utils/luci-app-ffwizard-berlin/luasrc/controller/assistent/assistent.lua
+++ b/utils/luci-app-ffwizard-berlin/luasrc/controller/assistent/assistent.lua
@@ -95,16 +95,24 @@ function commit()
 
   tools.configureQOS()
 
-  uci:commit("dhcp")
-  uci:commit("olsrd")
-  uci:commit("olsrd6")
-  uci:commit("firewall")
-  uci:commit("system")
-  uci:commit("ffwizard")
-  uci:commit("freifunk")
-  uci:commit("wireless")
-  uci:commit("network")
-  uci:commit("qos")
+  if uci:get("system", "ffberlin", "devmode") == "1" then
+    fftools.logger("devmode is enabed; changes will not commited")
+  else
+    uci:commit("dhcp")
+    uci:commit("olsrd")
+    uci:commit("olsrd6")
+    uci:commit("firewall")
+    uci:commit("system")
+    uci:commit("ffwizard")
+    uci:commit("freifunk")
+    uci:commit("wireless")
+    if uci:commit("network") == true then
+      fftools.logger("uci:commit network passwd")
+    else
+      fftools.logger("uci:commit network failed")
+    end
+    uci:commit("qos")
+  end
 
   sys.init.enable("olsrd")
   sys.init.enable("olsrd6")
