From: Sven Roederer <SvenRoederer@users.noreply.github.com>
Date: Sun, 23 Sep 2018 19:26:09 +0200
Subject: wizard: no auto-reboot when in developer-mode

Setting uci: system.ffberlin.devmode to "1" prevents the system from automatic reboot after finishing the wizard. This helps to check if the wizard is working correctly.

diff --git a/utils/luci-app-ffwizard-berlin/luasrc/view/freifunk/assistent/reboot.htm b/utils/luci-app-ffwizard-berlin/luasrc/view/freifunk/assistent/reboot.htm
index 71cf6fadfc64cc515bf34b4ec061edb1356dded4..068bbe0ca9ba481df63eb2fe0b6c3cab15a39de4 100644
--- a/utils/luci-app-ffwizard-berlin/luasrc/view/freifunk/assistent/reboot.htm
+++ b/utils/luci-app-ffwizard-berlin/luasrc/view/freifunk/assistent/reboot.htm
@@ -1,5 +1,7 @@
 <%
-  luci.sys.reboot()
+  if uci:get("system", "ffberlin", "devmode") == "0" then
+    luci.sys.reboot()
+  end
 %>
 
 <%+header%>
@@ -24,6 +26,16 @@
       sobald dein Router neugestartet hat.
     </p>
   </div>
+<%
+  local uci = require "luci.model.uci".cursor()
+  if uci:get("system", "ffberlin", "devmode") == "1" then
+%>
+    <p>
+      Das System ist im Entwickler-Modus und der automatische Neustart wird nicht ausgef√ºhrt.
+    </p>  
+<%
+  end
+%>
 </div>
 
 <%+footer%>
